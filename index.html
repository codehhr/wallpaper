<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" type="image/x-icon"
    href="https://codehhr.coding.net/p/codehhr/d/images/git/raw/master/avatar/favicon.ico">
  <title>wallpaper</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .box {
      padding: 10px;
      column-count: 3;
      column-gap: 10px;
    }

    .item {
      margin-bottom: 10px;
    }

    .item img {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <div class="box">
    <div class="item"> <img src="./austria.jpg" alt="austria"> </div>
    <div class="item"> <img src="./autumn.jpg" alt="autumn"> </div>
    <div class="item"> <img src="./autumnlake.jpg" alt="autumnlake"> </div>
    <div class="item"> <img src="./background.jpg" alt="background"> </div>
    <div class="item"> <img src="./boatinseaa.jpg" alt="boatinseaa"> </div>
    <div class="item"> <img src="./boatinseab.jpg" alt="boatinseab"> </div>
    <div class="item"> <img src="./cat.jpg" alt="cat"> </div>
    <div class="item"> <img src="./catgirl.jpg" alt="catgirl"> </div>
    <div class="item"> <img src="./countryside.jpg" alt="countryside"> </div>
    <div class="item"> <img src="./countryside_n.jpg" alt="countryside_n"> </div>
    <div class="item"> <img src="./dark.jpg" alt="dark"> </div>
    <div class="item"> <img src="./deepin.jpg" alt="deepin"> </div>
    <div class="item"> <img src="./deer.jpg" alt="deer"> </div>
    <div class="item"> <img src="./deer1.jpg" alt="deer1"> </div>
    <div class="item"> <img src="./deer2.jpg" alt="deer2"> </div>
    <div class="item"> <img src="./deer3.jpg" alt="deer3"> </div>
    <div class="item"> <img src="./desktop.jpg" alt="desktop"> </div>
    <div class="item"> <img src="./desktopa.png" alt="desktopa"> </div>
    <div class="item"> <img src="./dog.jpg" alt="dog"> </div>
    <div class="item"> <img src="./dream.jpg" alt="dream"> </div>
    <div class="item"> <img src="./dreaming.jpg" alt="dreaming"> </div>
    <div class="item"> <img src="./dreamlandmin.jpg" alt="dreamlandmin"> </div>
    <div class="item"> <img src="./duskb.jpg" alt="duskb"> </div>
    <div class="item"> <img src="./fa.jpg" alt="fa"> </div>
    <div class="item"> <img src="./fb.jpg" alt="fb"> </div>
    <div class="item"> <img src="./flower.jpg" alt="flower"> </div>
    <div class="item"> <img src="./girl.jpg" alt="girl"> </div>
    <div class="item"> <img src="./high_sierra.jpg" alt="high_sierra"> </div>
    <div class="item"> <img src="./huge_stone.jpg" alt="huge_stone"> </div>
    <div class="item"> <img src="./i3.png" alt="i3"> </div>
    <div class="item"> <img src="./ice.jpg" alt="ice"> </div>
    <div class="item"> <img src="./icemountain.jpg" alt="icemountain"> </div>
    <div class="item"> <img src="./imagine.png" alt="imagine"> </div>
    <div class="item"> <img src="./japana.jpg" alt="japana"> </div>
    <div class="item"> <img src="./lady.jpg" alt="lady"> </div>
    <div class="item"> <img src="./leaf.jpg" alt="leaf"> </div>
    <div class="item"> <img src="./lion.jpg" alt="lion"> </div>
    <div class="item"> <img src="./lock.jpg" alt="lock"> </div>
    <div class="item"> <img src="./lost.jpg" alt="lost"> </div>
    <div class="item"> <img src="./lovesea.jpg" alt="lovesea"> </div>
    <div class="item"> <img src="./man.jpg" alt="man"> </div>
    <div class="item"> <img src="./moonsea.jpg" alt="moonsea"> </div>
    <div class="item"> <img src="./north.jpg" alt="north"> </div>
    <div class="item"> <img src="./pinkmountain.jpg" alt="pinkmountain"> </div>
    <div class="item"> <img src="./purpor.jpg" alt="purpor"> </div>
    <div class="item"> <img src="./road.jpg" alt="road"> </div>
    <div class="item"> <img src="./seasupper.jpg" alt="seasupper"> </div>
    <div class="item"> <img src="./seasuppermin.jpg" alt="seasuppermin"> </div>
    <div class="item"> <img src="./simplea.jpg" alt="simplea"> </div>
    <div class="item"> <img src="./sky_man.jpg" alt="sky_man"> </div>
    <div class="item"> <img src="./space.jpg" alt="space"> </div>
    <div class="item"> <img src="./stoneflower.jpg" alt="stoneflower"> </div>
    <div class="item"> <img src="./summer_time.jpg" alt="summer_time"> </div>
    <div class="item"> <img src="./supper.jpg" alt="supper"> </div>
    <div class="item"> <img src="./townside.jpg" alt="townside"> </div>
    <div class="item"> <img src="./us.jpg" alt="us"> </div>
    <div class="item"> <img src="./wedding.jpg" alt="wedding"> </div>
    <div class="item"> <img src="./work.jpg" alt="work"> </div>
    <div class="item"> <img src="./yosemite.jpg" alt="yosemite"> </div>
  </div>
  <script>
    // lazyload
    // onload是等所有的资源文件加载完毕以后再绑定事件
    window.onload = function () {
      // 获取图片列表，即img标签列表
      var imgs = document.querySelectorAll('img');

      // 获取到浏览器顶部的距离
      function getTop(e) {
        return e.offsetTop;
      }

      // 懒加载实现
      function lazyload(imgs) {
        // 可视区域高度
        var h = window.innerHeight;
        //滚动区域高度
        var s = document.documentElement.scrollTop || document.body.scrollTop;
        for (var i = 0; i < imgs.length; i++) {
          //图片距离顶部的距离大于可视区域和滚动区域之和时懒加载
          if ((h + s) > getTop(imgs[i])) {
            // 真实情况是页面开始有2秒空白，所以使用setTimeout定时2s
            (function (i) {
              setTimeout(function () {
                // 不加立即执行函数i会等于9
                // 隐形加载图片或其他资源，
                //创建一个临时图片，这个图片在内存中不会到页面上去。实现隐形加载
                var temp = new Image();
                temp.src = imgs[i].getAttribute('data-src');//只会请求一次
                // onload判断图片加载完毕，真是图片加载完毕，再赋值给dom节点
                temp.onload = function () {
                  // 获取自定义属性data-src，用真图片替换假图片
                  imgs[i].src = imgs[i].getAttribute('data-src')
                }
              }, 2000)
            })(i)
          }
        }
      }
      lazyload(imgs);

      // 滚屏函数
      window.onscroll = function () {
        lazyload(imgs);
      }
    }
  </script>
</body>

</html>
